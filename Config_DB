package Config_DataBase;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class DBConfig {
	private String dbpath;
	
	public DBConfig(String dbpath) {
		this.dbpath=dbpath;
	}
	
    public static DBConfig loadDBConfig(String fichierConfig) throws IOException {
        BufferedReader reader = null;
        String dbpath = null;
        
        try {
            reader = new BufferedReader(new FileReader(fichierConfig));
            String line;
            while ((line = reader.readLine()) != null) {
                line = line.trim();
                if (line.startsWith("dbpath")) {
                    dbpath = line.split("=")[1].trim().replace("'", "").replace("\"", "");
                    break;
                }
            }
            
            if (dbpath == null) {
                throw new IllegalArgumentException("Le fichier de configuration ne contient pas de dbpath.");
            }
        } finally {
            if (reader != null) {
                reader.close();
            }
        }
        
        return new DBConfig(dbpath);
    }
    
    public String toString() {
    	return "Path : {"+this.dbpath+"}";
    }

}
